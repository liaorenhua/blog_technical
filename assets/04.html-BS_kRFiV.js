import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,i as e,o as i}from"./app-wuj0w1aR.js";const l={};function p(r,s){return i(),a("div",null,s[0]||(s[0]=[e(`<h1 id="gc-日志格式与可视化日志分析工具" tabindex="-1"><a class="header-anchor" href="#gc-日志格式与可视化日志分析工具"><span>GC 日志格式与可视化日志分析工具</span></a></h1><p>一个垃圾收集器的性能评估是吞吐量、响应时间，调优也主要是针对这两点进行。</p><p>本章会介绍两个工具：</p><ul><li><p><a href="https://gceasy.io/" target="_blank" rel="noopener noreferrer">gceasy.io</a>：在线的 web 工具</p><p>部分收费</p></li><li><p><a href="https://github.com/chewiebug/GCViewer" target="_blank" rel="noopener noreferrer">GCViewer</a>：开源工具</p></li></ul><h2 id="打印日志相关参数" tabindex="-1"><a class="header-anchor" href="#打印日志相关参数"><span>打印日志相关参数</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+PrintGCDetails</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 打印时间</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+PrintGCTimeStamps</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 时间相关：针对 GC 开始的时间</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+PrintGCDateStamps</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># GC 日志文件</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-Xloggc:$CATALINA_HOME/logs/gc.log</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+PrintHeapAtGC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># youn区年龄信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-XX:+PrintTenuringDistribution</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="gc-日志格式" tabindex="-1"><a class="header-anchor" href="#gc-日志格式"><span>GC 日志格式</span></a></h2><p>这里使用前面几个参数就可以了，放在 boot 程序的启动参数中</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>-XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -Xloggc:/Users/mrcode/IdeaProjects/monitor-tuning/gc.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>重启后观察日志格式</p><h3 id="parallelgc-日志格式" tabindex="-1"><a class="header-anchor" href="#parallelgc-日志格式"><span>ParallelGC 日志格式</span></a></h3><p>默认使用的是并行垃圾收集器，它的日志格式如下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Java HotSpot(TM) 64-Bit Server VM (25.201-b09) for bsd-amd64 JRE (1.8.0_201-b09), built on Dec 15 2018 18:35:23 by &quot;java_re&quot; with gcc 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)</span></span>
<span class="line"><span>Memory: 4k page, physical 16777216k(45944k free)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/proc/meminfo:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CommandLine flags: -XX:-BytecodeVerificationLocal -XX:-BytecodeVerificationRemote -XX:InitialHeapSize=268435456 -XX:+ManagementServer -XX:MaxHeapSize=4294967296 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:TieredStopAtLevel=1 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseParallelGC </span></span>
<span class="line"><span>2021-02-07T10:29:33.290-0800: 1.789: [GC (Allocation Failure) [PSYoungGen: 65536K-&gt;5727K(76288K)] 65536K-&gt;5743K(251392K), 0.0075188 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span>2021-02-07T10:29:33.962-0800: 2.461: [GC (GCLocker Initiated GC) [PSYoungGen: 71263K-&gt;8273K(76288K)] 71283K-&gt;8301K(251392K), 0.0123996 secs] [Times: user=0.02 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:29:34.220-0800: 2.719: [GC (Metadata GC Threshold) [PSYoungGen: 45557K-&gt;7569K(76288K)] 45585K-&gt;7605K(251392K), 0.0083379 secs] [Times: user=0.02 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span>2021-02-07T10:29:34.229-0800: 2.727: [Full GC (Metadata GC Threshold) [PSYoungGen: 7569K-&gt;0K(76288K)] [ParOldGen: 35K-&gt;7308K(100352K)] 7605K-&gt;7308K(176640K), [Metaspace: 20552K-&gt;20552K(1067008K)], 0.0344578 secs] [Times: user=0.08 sys=0.01, real=0.05 secs] </span></span>
<span class="line"><span>2021-02-07T10:29:34.755-0800: 3.253: [GC (Allocation Failure) [PSYoungGen: 65536K-&gt;8473K(111616K)] 72875K-&gt;15884K(211968K), 0.0062509 secs] [Times: user=0.02 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:29:35.575-0800: 4.074: [GC (Allocation Failure) [PSYoungGen: 111385K-&gt;10735K(139776K)] 118796K-&gt;20977K(240128K), 0.0188584 secs] [Times: user=0.04 sys=0.01, real=0.02 secs]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>CommandLine flags</code>：打印出来了命令行的参数，有些是我们设置的，有些是默认的，有些是自适应的</li></ul><p>针对这一行信息，我们来解释下每一列的含义</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>2021-02-07T10:29:33.290-0800: 1.789: [GC (Allocation Failure) [PSYoungGen: 65536K-&gt;5727K(76288K)] 65536K-&gt;5743K(251392K), 0.0075188 secs] [Times: user=0.01 sys=0.00, real=0.00 secs]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>2021-02-07T10:29:33.290-0800</code>：GC 开始时间</li><li><code>1.789: </code></li><li><code>[GC (Allocation Failure)</code>：GC 发生的原因</li><li><code> [PSYoungGen: 65536K-&gt;5727K(76288K)]</code>：这次 GC 发生在哪个区 <ul><li>65536K：垃圾回收之前的大小</li><li>5727K(76288K)：垃圾回收之后的大小（后面是该区的总大小）</li></ul></li><li><code>65536K-&gt;5743K(251392K)</code>：垃圾回收前、回收后、堆的总大小信息</li><li><code>0.0075188</code> 垃圾回收所用时间</li></ul><h3 id="cms-gc" tabindex="-1"><a class="header-anchor" href="#cms-gc"><span>CMS GC</span></a></h3><p>在前面的配置上，新增使用指定的 GC 收集器即可。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>-XX:+UseConcMarkSweepGC</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>它的日志格式是这样的</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Java HotSpot(TM) 64-Bit Server VM (25.201-b09) for bsd-amd64 JRE (1.8.0_201-b09), built on Dec 15 2018 18:35:23 by &quot;java_re&quot; with gcc 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)</span></span>
<span class="line"><span>Memory: 4k page, physical 16777216k(45764k free)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/proc/meminfo:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CommandLine flags: -XX:-BytecodeVerificationLocal -XX:-BytecodeVerificationRemote -XX:InitialHeapSize=268435456 -XX:+ManagementServer -XX:MaxHeapSize=4294967296 -XX:MaxNewSize=697933824 -XX:MaxTenuringThreshold=6 -XX:OldPLABSize=16 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:TieredStopAtLevel=1 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseConcMarkSweepGC -XX:+UseParNewGC </span></span>
<span class="line"><span>2021-02-07T10:46:45.053-0800: 2.044: [GC (Allocation Failure) 2021-02-07T10:46:45.053-0800: 2.044: [ParNew: 69952K-&gt;5637K(78656K), 0.0150085 secs] 69952K-&gt;5637K(253440K), 0.0152421 secs] [Times: user=0.03 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:45.621-0800: 2.612: [GC (Allocation Failure) 2021-02-07T10:46:45.621-0800: 2.612: [ParNew: 75589K-&gt;7032K(78656K), 0.0452818 secs] 75589K-&gt;10079K(253440K), 0.0454450 secs] [Times: user=0.09 sys=0.02, real=0.04 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:46.261-0800: 3.251: [GC (Allocation Failure) 2021-02-07T10:46:46.261-0800: 3.252: [ParNew: 76984K-&gt;7569K(78656K), 0.0101168 secs] 80031K-&gt;12081K(253440K), 0.0102365 secs] [Times: user=0.03 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:46.272-0800: 3.262: [GC (CMS Initial Mark) [1 CMS-initial-mark: 4512K(174784K)] 12081K(253440K), 0.0018904 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:46.274-0800: 3.264: [CMS-concurrent-mark-start]</span></span>
<span class="line"><span>2021-02-07T10:46:46.294-0800: 3.284: [CMS-concurrent-mark: 0.020/0.020 secs] [Times: user=0.05 sys=0.01, real=0.02 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:46.294-0800: 3.284: [CMS-concurrent-preclean-start]</span></span>
<span class="line"><span>2021-02-07T10:46:46.298-0800: 3.288: [CMS-concurrent-preclean: 0.003/0.003 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:46.298-0800: 3.288: [CMS-concurrent-abortable-preclean-start]</span></span>
<span class="line"><span>2021-02-07T10:46:46.641-0800: 3.631: [CMS-concurrent-abortable-preclean: 0.174/0.343 secs] [Times: user=0.59 sys=0.05, real=0.35 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:46.641-0800: 3.631: [GC (CMS Final Remark) [YG occupancy: 51820 K (78656 K)]2021-02-07T10:46:46.641-0800: 3.631: [Rescan (parallel) , 0.0057968 secs]2021-02-07T10:46:46.647-0800: 3.637: [weak refs processing, 0.0003866 secs]2021-02-07T10:46:46.647-0800: 3.637: [class unloading, 0.0025863 secs]2021-02-07T10:46:46.650-0800: 3.640: [scrub symbol table, 0.0032540 secs]2021-02-07T10:46:46.653-0800: 3.643: [scrub string table, 0.0004287 secs][1 CMS-remark: 4512K(174784K)] 56332K(253440K), 0.0129919 secs] [Times: user=0.05 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:46.654-0800: 3.644: [CMS-concurrent-sweep-start]</span></span>
<span class="line"><span>2021-02-07T10:46:46.656-0800: 3.647: [CMS-concurrent-sweep: 0.002/0.002 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:46.657-0800: 3.647: [CMS-concurrent-reset-start]</span></span>
<span class="line"><span>2021-02-07T10:46:46.696-0800: 3.686: [CMS-concurrent-reset: 0.039/0.039 secs] [Times: user=0.07 sys=0.03, real=0.04 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:46.914-0800: 3.904: [GC (Allocation Failure) 2021-02-07T10:46:46.914-0800: 3.904: [ParNew: 77521K-&gt;7358K(78656K), 0.0108468 secs] 82027K-&gt;15589K(253440K), 0.0109486 secs] [Times: user=0.03 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:47.552-0800: 4.542: [GC (Allocation Failure) 2021-02-07T10:46:47.552-0800: 4.542: [ParNew: 77310K-&gt;7358K(78656K), 0.0122155 secs] 85541K-&gt;20043K(253440K), 0.0123272 secs] [Times: user=0.04 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:46:48.237-0800: 5.227: [GC (Allocation Failure) 2021-02-07T10:46:48.237-0800: 5.227: [ParNew: 77310K-&gt;5464K(78656K), 0.0132060 secs] 89995K-&gt;21202K(253440K), 0.0133295 secs] [Times: user=0.04 sys=0.00, real=0.02 secs]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最明显的是原因 <code>CMS</code> 开头的，有好几行，是前面说到过的他的一些标记过程，多行组成的一个 Full GC</p><p><a href="https://blogs.oracle.com/poonam/understanding-cms-gc-logs" target="_blank" rel="noopener noreferrer">这里有一篇博客教你读懂 CMS GC 日志</a>，里面有一些常见的发生之后如何调优之类的</p><h3 id="g1-日志格式" tabindex="-1"><a class="header-anchor" href="#g1-日志格式"><span>G1 日志格式</span></a></h3><p>更换 G1 收集器</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>-XX:+UseG1GC</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>日志格式如下</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Java HotSpot(TM) 64-Bit Server VM (25.201-b09) for bsd-amd64 JRE (1.8.0_201-b09), built on Dec 15 2018 18:35:23 by &quot;java_re&quot; with gcc 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)</span></span>
<span class="line"><span>Memory: 4k page, physical 16777216k(202568k free)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/proc/meminfo:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CommandLine flags: -XX:-BytecodeVerificationLocal -XX:-BytecodeVerificationRemote -XX:InitialHeapSize=268435456 -XX:+ManagementServer -XX:MaxHeapSize=4294967296 -XX:+PrintGC -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:TieredStopAtLevel=1 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC </span></span>
<span class="line"><span>2021-02-07T10:54:40.607-0800: 0.936: [GC pause (G1 Evacuation Pause) (young), 0.0063056 secs]</span></span>
<span class="line"><span>   [Parallel Time: 3.4 ms, GC Workers: 8]</span></span>
<span class="line"><span>      [GC Worker Start (ms): Min: 936.6, Avg: 936.7, Max: 937.1, Diff: 0.6]</span></span>
<span class="line"><span>      [Ext Root Scanning (ms): Min: 0.0, Avg: 0.4, Max: 1.2, Diff: 1.2, Sum: 2.8]</span></span>
<span class="line"><span>      [Update RS (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span></span>
<span class="line"><span>         [Processed Buffers: Min: 0, Avg: 0.0, Max: 0, Diff: 0, Sum: 0]</span></span>
<span class="line"><span>      [Scan RS (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span></span>
<span class="line"><span>      [Code Root Scanning (ms): Min: 0.0, Avg: 0.4, Max: 2.8, Diff: 2.8, Sum: 3.0]</span></span>
<span class="line"><span>      [Object Copy (ms): Min: 0.0, Avg: 1.5, Max: 2.0, Diff: 2.0, Sum: 12.0]</span></span>
<span class="line"><span>      [Termination (ms): Min: 0.0, Avg: 0.9, Max: 1.0, Diff: 1.0, Sum: 6.8]</span></span>
<span class="line"><span>         [Termination Attempts: Min: 1, Avg: 19.0, Max: 33, Diff: 32, Sum: 152]</span></span>
<span class="line"><span>      [GC Worker Other (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]</span></span>
<span class="line"><span>      [GC Worker Total (ms): Min: 2.7, Avg: 3.1, Max: 3.3, Diff: 0.6, Sum: 24.8]</span></span>
<span class="line"><span>      [GC Worker End (ms): Min: 939.7, Avg: 939.8, Max: 939.9, Diff: 0.1]</span></span>
<span class="line"><span>   [Code Root Fixup: 0.0 ms]</span></span>
<span class="line"><span>   [Code Root Purge: 0.0 ms]</span></span>
<span class="line"><span>   [Clear CT: 0.2 ms]</span></span>
<span class="line"><span>   [Other: 2.6 ms]</span></span>
<span class="line"><span>      [Choose CSet: 0.0 ms]</span></span>
<span class="line"><span>      [Ref Proc: 2.2 ms]</span></span>
<span class="line"><span>      [Ref Enq: 0.0 ms]</span></span>
<span class="line"><span>      [Redirty Cards: 0.3 ms]</span></span>
<span class="line"><span>      [Humongous Register: 0.0 ms]</span></span>
<span class="line"><span>      [Humongous Reclaim: 0.0 ms]</span></span>
<span class="line"><span>      [Free CSet: 0.0 ms]</span></span>
<span class="line"><span>   [Eden: 24.0M(24.0M)-&gt;0.0B(37.0M) Survivors: 0.0B-&gt;3072.0K Heap: 24.0M(256.0M)-&gt;2486.8K(256.0M)]</span></span>
<span class="line"><span> [Times: user=0.02 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:54:41.313-0800: 1.642: [GC pause (G1 Evacuation Pause) (young), 0.0105166 secs]</span></span>
<span class="line"><span>   [Parallel Time: 6.2 ms, GC Workers: 8]</span></span>
<span class="line"><span>      [GC Worker Start (ms): Min: 1642.0, Avg: 1642.1, Max: 1642.1, Diff: 0.1]</span></span>
<span class="line"><span>      [Ext Root Scanning (ms): Min: 0.1, Avg: 0.5, Max: 2.0, Diff: 1.8, Sum: 3.9]</span></span>
<span class="line"><span>      [Update RS (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span></span>
<span class="line"><span>         [Processed Buffers: Min: 0, Avg: 0.0, Max: 0, Diff: 0, Sum: 0]</span></span>
<span class="line"><span>      [Scan RS (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span></span>
<span class="line"><span>      [Code Root Scanning (ms): Min: 0.0, Avg: 0.1, Max: 0.5, Diff: 0.5, Sum: 0.9]</span></span>
<span class="line"><span>      [Object Copy (ms): Min: 1.7, Avg: 3.2, Max: 4.3, Diff: 2.6, Sum: 25.7]</span></span>
<span class="line"><span>      [Termination (ms): Min: 0.0, Avg: 1.2, Max: 2.4, Diff: 2.4, Sum: 9.4]</span></span>
<span class="line"><span>         [Termination Attempts: Min: 1, Avg: 18.9, Max: 30, Diff: 29, Sum: 151]</span></span>
<span class="line"><span>      [GC Worker Other (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]</span></span>
<span class="line"><span>      [GC Worker Total (ms): Min: 4.5, Avg: 5.0, Max: 6.1, Diff: 1.6, Sum: 40.1]</span></span>
<span class="line"><span>      [GC Worker End (ms): Min: 1646.7, Avg: 1647.1, Max: 1648.2, Diff: 1.5]</span></span>
<span class="line"><span>   [Code Root Fixup: 0.0 ms]</span></span>
<span class="line"><span>   [Code Root Purge: 0.0 ms]</span></span>
<span class="line"><span>   [Clear CT: 0.1 ms]</span></span>
<span class="line"><span>   [Other: 4.1 ms]</span></span>
<span class="line"><span>      [Choose CSet: 0.0 ms]</span></span>
<span class="line"><span>      [Ref Proc: 3.7 ms]</span></span>
<span class="line"><span>      [Ref Enq: 0.0 ms]</span></span>
<span class="line"><span>      [Redirty Cards: 0.1 ms]</span></span>
<span class="line"><span>      [Humongous Register: 0.1 ms]</span></span>
<span class="line"><span>      [Humongous Reclaim: 0.0 ms]</span></span>
<span class="line"><span>      [Free CSet: 0.1 ms]</span></span>
<span class="line"><span>   [Eden: 37.0M(37.0M)-&gt;0.0B(113.0M) Survivors: 3072.0K-&gt;5120.0K Heap: 39.4M(256.0M)-&gt;7125.5K(256.0M)]</span></span>
<span class="line"><span> [Times: user=0.03 sys=0.01, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:54:42.233-0800: 2.562: [GC pause (Metadata GC Threshold) (young) (initial-mark), 0.0328815 secs]</span></span>
<span class="line"><span>   [Parallel Time: 15.5 ms, GC Workers: 8]</span></span>
<span class="line"><span>      [GC Worker Start (ms): Min: 2562.6, Avg: 2562.7, Max: 2563.6, Diff: 1.1]</span></span>
<span class="line"><span>      [Ext Root Scanning (ms): Min: 1.6, Avg: 3.6, Max: 6.4, Diff: 4.8, Sum: 28.9]</span></span>
<span class="line"><span>      [Update RS (ms): Min: 0.0, Avg: 0.1, Max: 0.3, Diff: 0.3, Sum: 0.5]</span></span>
<span class="line"><span>         [Processed Buffers: Min: 0, Avg: 0.2, Max: 1, Diff: 1, Sum: 2]</span></span>
<span class="line"><span>      [Scan RS (ms): Min: 0.0, Avg: 0.0, Max: 0.1, Diff: 0.0, Sum: 0.1]</span></span>
<span class="line"><span>      [Code Root Scanning (ms): Min: 0.0, Avg: 0.8, Max: 3.6, Diff: 3.6, Sum: 6.6]</span></span>
<span class="line"><span>      [Object Copy (ms): Min: 7.3, Avg: 8.6, Max: 10.0, Diff: 2.8, Sum: 68.6]</span></span>
<span class="line"><span>      [Termination (ms): Min: 0.0, Avg: 1.6, Max: 2.5, Diff: 2.5, Sum: 12.5]</span></span>
<span class="line"><span>         [Termination Attempts: Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 8]</span></span>
<span class="line"><span>      [GC Worker Other (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]</span></span>
<span class="line"><span>      [GC Worker Total (ms): Min: 13.9, Avg: 14.7, Max: 15.4, Diff: 1.5, Sum: 117.4]</span></span>
<span class="line"><span>      [GC Worker End (ms): Min: 2576.5, Avg: 2577.4, Max: 2578.0, Diff: 1.5]</span></span>
<span class="line"><span>   [Code Root Fixup: 0.1 ms]</span></span>
<span class="line"><span>   [Code Root Purge: 0.1 ms]</span></span>
<span class="line"><span>   [Clear CT: 0.3 ms]</span></span>
<span class="line"><span>   [Other: 17.0 ms]</span></span>
<span class="line"><span>      [Choose CSet: 0.0 ms]</span></span>
<span class="line"><span>      [Ref Proc: 14.5 ms]</span></span>
<span class="line"><span>      [Ref Enq: 0.1 ms]</span></span>
<span class="line"><span>      [Redirty Cards: 1.9 ms]</span></span>
<span class="line"><span>      [Humongous Register: 0.0 ms]</span></span>
<span class="line"><span>      [Humongous Reclaim: 0.0 ms]</span></span>
<span class="line"><span>      [Free CSet: 0.2 ms]</span></span>
<span class="line"><span>   [Eden: 96.0M(113.0M)-&gt;0.0B(140.0M) Survivors: 5120.0K-&gt;13.0M Heap: 102.5M(256.0M)-&gt;14.9M(256.0M)]</span></span>
<span class="line"><span> [Times: user=0.05 sys=0.01, real=0.03 secs] </span></span>
<span class="line"><span>2021-02-07T10:54:42.267-0800: 2.596: [GC concurrent-root-region-scan-start]</span></span>
<span class="line"><span>2021-02-07T10:54:42.277-0800: 2.606: [GC concurrent-root-region-scan-end, 0.0105123 secs]</span></span>
<span class="line"><span>2021-02-07T10:54:42.277-0800: 2.606: [GC concurrent-mark-start]</span></span>
<span class="line"><span>2021-02-07T10:54:42.278-0800: 2.607: [GC concurrent-mark-end, 0.0004125 secs]</span></span>
<span class="line"><span>2021-02-07T10:54:42.278-0800: 2.607: [GC remark 2021-02-07T10:54:42.278-0800: 2.607: [Finalize Marking, 0.0008342 secs] 2021-02-07T10:54:42.279-0800: 2.608: [GC ref-proc, 0.0007701 secs] 2021-02-07T10:54:42.280-0800: 2.608: [Unloading, 0.0028971 secs], 0.0048015 secs]</span></span>
<span class="line"><span> [Times: user=0.02 sys=0.00, real=0.01 secs] </span></span>
<span class="line"><span>2021-02-07T10:54:42.283-0800: 2.612: [GC cleanup 16M-&gt;14M(256M), 0.0006908 secs]</span></span>
<span class="line"><span> [Times: user=0.00 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span>2021-02-07T10:54:42.284-0800: 2.613: [GC concurrent-cleanup-start]</span></span>
<span class="line"><span>2021-02-07T10:54:42.284-0800: 2.613: [GC concurrent-cleanup-end, 0.0000163 secs]</span></span>
<span class="line"><span>2021-02-07T10:54:43.338-0800: 3.667: [GC pause (G1 Evacuation Pause) (young), 0.0244592 secs]</span></span>
<span class="line"><span>   [Parallel Time: 15.6 ms, GC Workers: 8]</span></span>
<span class="line"><span>      [GC Worker Start (ms): Min: 3667.4, Avg: 3667.5, Max: 3667.5, Diff: 0.1]</span></span>
<span class="line"><span>      [Ext Root Scanning (ms): Min: 0.1, Avg: 0.9, Max: 4.9, Diff: 4.8, Sum: 7.5]</span></span>
<span class="line"><span>      [Update RS (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]</span></span>
<span class="line"><span>         [Processed Buffers: Min: 0, Avg: 0.2, Max: 2, Diff: 2, Sum: 2]</span></span>
<span class="line"><span>      [Scan RS (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]</span></span>
<span class="line"><span>      [Code Root Scanning (ms): Min: 0.0, Avg: 0.5, Max: 1.4, Diff: 1.4, Sum: 4.2]</span></span>
<span class="line"><span>      [Object Copy (ms): Min: 10.4, Avg: 13.8, Max: 15.0, Diff: 4.6, Sum: 110.1]</span></span>
<span class="line"><span>      [Termination (ms): Min: 0.0, Avg: 0.2, Max: 0.3, Diff: 0.3, Sum: 1.3]</span></span>
<span class="line"><span>         [Termination Attempts: Min: 1, Avg: 37.1, Max: 53, Diff: 52, Sum: 297]</span></span>
<span class="line"><span>      [GC Worker Other (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]</span></span>
<span class="line"><span>      [GC Worker Total (ms): Min: 15.3, Avg: 15.4, Max: 15.5, Diff: 0.2, Sum: 123.4]</span></span>
<span class="line"><span>      [GC Worker End (ms): Min: 3682.8, Avg: 3682.9, Max: 3683.0, Diff: 0.1]</span></span>
<span class="line"><span>   [Code Root Fixup: 0.2 ms]</span></span>
<span class="line"><span>   [Code Root Purge: 0.1 ms]</span></span>
<span class="line"><span>   [Clear CT: 0.1 ms]</span></span>
<span class="line"><span>   [Other: 8.5 ms]</span></span>
<span class="line"><span>      [Choose CSet: 0.0 ms]</span></span>
<span class="line"><span>      [Ref Proc: 7.8 ms]</span></span>
<span class="line"><span>      [Ref Enq: 0.0 ms]</span></span>
<span class="line"><span>      [Redirty Cards: 0.1 ms]</span></span>
<span class="line"><span>      [Humongous Register: 0.0 ms]</span></span>
<span class="line"><span>      [Humongous Reclaim: 0.0 ms]</span></span>
<span class="line"><span>      [Free CSet: 0.4 ms]</span></span>
<span class="line"><span>   [Eden: 140.0M(140.0M)-&gt;0.0B(133.0M) Survivors: 13.0M-&gt;20.0M Heap: 153.0M(256.0M)-&gt;20.3M(256.0M)]</span></span>
<span class="line"><span> [Times: user=0.08 sys=0.02, real=0.03 secs]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>G1 的日志内容就多了很多了</p><p><a href="https://blogs.oracle.com/poonam/understanding-g1-gc-logs" target="_blank" rel="noopener noreferrer">这是 G1 的介绍博客</a>，不一定是最新的，但是基本上入门是可以了</p><h2 id="gceasy" tabindex="-1"><a class="header-anchor" href="#gceasy"><span>gceasy</span></a></h2><p><a href="https://gceasy.io/" target="_blank" rel="noopener noreferrer">gceasy.io</a>：在线的 web 工具，上传 gc 文件，等待出结果就可以了，会统计出一些图表信息，更加直观。</p><p>由于笔者这部分已经跟不上了，就不再适合细致化的记录这一部分的类容了</p><h2 id="gcviewr" tabindex="-1"><a class="header-anchor" href="#gcviewr"><span>GCViewr</span></a></h2><p><a href="https://github.com/chewiebug/GCViewer" target="_blank" rel="noopener noreferrer">GCViewer</a>：开源工具</p><p>此工具没有 gceasy 工具出的报告多。</p>`,37)]))}const t=n(l,[["render",p],["__file","04.html.vue"]]),m=JSON.parse('{"path":"/monitor-tuning/06/04.html","title":"GC 日志格式与可视化日志分析工具","lang":"zh-CN","frontmatter":{"description":"GC 日志格式与可视化日志分析工具 一个垃圾收集器的性能评估是吞吐量、响应时间，调优也主要是针对这两点进行。 本章会介绍两个工具： gceasy.io：在线的 web 工具 部分收费 GCViewer：开源工具 打印日志相关参数 GC 日志格式 这里使用前面几个参数就可以了，放在 boot 程序的启动参数中 重启后观察日志格式 ParallelGC 日...","head":[["meta",{"property":"og:url","content":"https://www.pvzge.com/blog_technical/monitor-tuning/06/04.html"}],["meta",{"property":"og:title","content":"GC 日志格式与可视化日志分析工具"}],["meta",{"property":"og:description","content":"GC 日志格式与可视化日志分析工具 一个垃圾收集器的性能评估是吞吐量、响应时间，调优也主要是针对这两点进行。 本章会介绍两个工具： gceasy.io：在线的 web 工具 部分收费 GCViewer：开源工具 打印日志相关参数 GC 日志格式 这里使用前面几个参数就可以了，放在 boot 程序的启动参数中 重启后观察日志格式 ParallelGC 日..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-21T11:38:46.000Z"}],["meta",{"property":"article:modified_time","content":"2024-12-21T11:38:46.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"GC 日志格式与可视化日志分析工具\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-21T11:38:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Leo\\",\\"url\\":\\"https://blog.csdn.net/liao_rh\\"}]}"]]},"headers":[{"level":2,"title":"打印日志相关参数","slug":"打印日志相关参数","link":"#打印日志相关参数","children":[]},{"level":2,"title":"GC 日志格式","slug":"gc-日志格式","link":"#gc-日志格式","children":[{"level":3,"title":"ParallelGC 日志格式","slug":"parallelgc-日志格式","link":"#parallelgc-日志格式","children":[]},{"level":3,"title":"CMS GC","slug":"cms-gc","link":"#cms-gc","children":[]},{"level":3,"title":"G1 日志格式","slug":"g1-日志格式","link":"#g1-日志格式","children":[]}]},{"level":2,"title":"gceasy","slug":"gceasy","link":"#gceasy","children":[]},{"level":2,"title":"GCViewr","slug":"gcviewr","link":"#gcviewr","children":[]}],"git":{"createdTime":1734781126000,"updatedTime":1734781126000,"contributors":[{"name":"liao_rh","username":"liao_rh","email":"993929808@qq.com","commits":1,"url":"https://github.com/liao_rh"}]},"readingTime":{"minutes":8.89,"words":2666},"filePathRelative":"monitor-tuning/06/04.md","localizedDate":"2024年12月21日","autoDesc":true}');export{t as comp,m as data};
